<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì“°ë ˆê¸°í”¼í•˜ê¸°ê²Œì„</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
  
  <!-- 
    1. ë°°ê²½, ë˜¥ ë–¨ì–´ì§€ëŠ” ê±° êµ¬í˜„
    2. ì›€ì§ì´ëŠ” ì‚¬ëŒ êµ¬í˜„ 
    3. ì ìˆ˜ êµ¬í˜„
  -->
  <article id="app">
    <h1 class="tit">ğŸ¦€ë°”ë‹·ì†ì— ì‚¬ëŠ” ê·€ì—¬ìš´ ê²Œì¹œêµ¬ë¥¼ êµ¬í•´ì£¼ì„¸ìš”!ğŸ¦€</h1>
    <div class="play">
      <button class="btn">ì‹œ ì‘</button>
      <span class="score">score : <strong class="score-n">0</strong></span>
      <div class="life"></div>
      <div class="trash"></div>
      <div class="crab"></div>
    </div>
  </article>

  <script>
    const crab = document.querySelector(".crab");
    let pos = 350;
    let keys = {};
    
    function move(event) {
      keys[event.key] = true;
    }
    function stop(e) {
      keys[event.key] = false;
    }

    document.addEventListener('keydown', move);
    document.addEventListener('keyup', stop);

    function play() {
      if(keys.ArrowRight) {
        if(pos < 700){
        pos += 5;
        crab.style.transform = `translateX(${pos}px)  translateY(330px)`
        }
      }
      if(keys.ArrowLeft) {
        if(pos > 0) {
          pos -= 5;
          crab.style.transform = `translateX(${pos}px)  translateY(330px)`
        }
      }
      window.requestAnimationFrame(play);
    }
    window.requestAnimationFrame(play);

    let dropN = 0;
    let life = 5;
    let trashPos = 0;
    let trash = document.querySelector(".trash");

    const btn = document.querySelector(".btn");

    btn.addEventListener("click", () => {
        btn.classList.add("ir");

        dropN = Math.floor(Math.random()*730);
        while(trashPos < 400) {
            trashPos += 5;
            trash.style.transform = `translateX(${dropN}px)  translateY(${trashPos}px)`
          }
          window.requestAnimationFrame(play);
    });
    window.requestAnimationFrame(play);


    // function drop () {

      
    //   dropN = Math.floor(Math.random()*730);
    //   for ( let i = trashPos; i < 500; i++) {
    //     trash.style.transform = `translateX(${dropN}px)  translateY(${i}px)`
    //   }
    //   while(life > 0) {
    //     trash.style.transform = `translateX(${dropN}px)  translateY(330px)`
    //   }
    // }
  </script>
</body>
</html>